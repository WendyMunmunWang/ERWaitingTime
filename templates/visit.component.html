<h1 class="page-header">Log Patient Visit</h1>

<form class="form-horizontal">
	<div class="form-group">
		<label class="col-sm-2" for="visit-id">Visit ID:</label>
		<div class="col-sm-10">
			<input class="form-control" type="text" name="visit-id" id="visit-id" readonly="readonly">
			<script src="../node_modules/uuid/uuid.js">
				var x = uuid.v1();
				document.getElementById("visit-id").innerHTML = x;
			</script>
		</div>
	</div>
	<div class="form-group">
		<label for="pid">Patient ID</label>
		<select class="form-control" id="pid" #pid>
			<option *ngFor="#id of patientIds">{{id}}</option>
		</select>
	</div>
	<div class="form-group">
		<label for="sid">Staff ID</label>
		<select class="form-control" id="sid" #sid>
			<option *ngFor="#id of staffIds">{{id}}</option>
		</select>
	</div>
	<div class="form-group">
		<label for="room">Room Number</label>
		<input type="number" min="0000" max="10000" id="room" class="form-control" placeholder="i.e. 101" #room>
	</div>
	<div class="form-group">
		<label for="date">Date</label>
		<input type="date" class="form-control" id="date" placeholder="yyyy-mm-dd" #date>
	</div>
	<input type="submit" class="btn btn-primary" (click)="postVisit(pid.value, sid.value, room.value, date.value); getVisits()">
</form>

<table class="table table-striped">
	<thead>
	<tr>
		<th>Visit ID</th>
		<th>Patient ID</th>
		<th>Staff ID</th>
		<th>Room Number</th>
		<th>Date of Visit</th>
	</tr>
	</thead>
	<tbody>
	<tr *ngFor="#visit of visits">
		<td> {{visit.visit_id}} </td>
		<td> {{visit.patient_id}} </td>
		<td> {{visit.staff_id}} </td>
		<td> {{visit.room}} </td>
		<td> {{visit.date}} </td>

		<button (click)="deleteVisits(sid.value)" class="btn btn-danger">Delete</button>
	</tr>
	</tbody>
</table>